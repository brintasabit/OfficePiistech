

@model IEnumerable<Employee180220.Models.EmployeeInfo>
@{
    Layout = null;
}
<script>
    //$("#tableSearch").on("keyup", function() {
    //    var value = $(this).val().toLowerCase();
    //    $("#employeeTable tr").filter(function() {
    //        $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
    //    });
    //});

    //var Search = function (url) {
    //    console.log('Ajax call');
    //    $.notify("Found!", "success");
    //    $.ajax({
    //        type: 'GET',
    //        url: url,
    //        success: function (response) {
    //            $("#main").html(response);

    //        }

    //    });

    //}

    $('#button2').unbind().click(function () {
        console.log('Button clicked');
        AddEmployee();

    });
    var AddEmployee = function () {

        $('#main').load('/Employee/AddOrEdit');
    }

    //$('.mdb-select').materialSelect();
    //$('.select-wrapper.md-form.md-outline input.select-dropdown').bind('focus blur', function () {
    //    $(this).closest('.select-outline').find('label').toggleClass('active');
    //    $(this).closest('.select-outline').find('.caret').toggleClass('active');
    //});
    $('#Search').unbind().keyup(function () {
        console.log('Search Button clicked');
        SearchEmployee();     
    });
    $('#FilterBy').unbind().click(function () {
        console.log('Filter clicked');
        SearchEmployee();
    });
    var SearchEmployee = function() {
        var SearchText = $("#Search").val();
        var FilterBy = $("#FilterBy").val();
        
        var Data = $("#tableSrch");
        Data.html("");
        $.ajax({
            url: '/Employee/SearchFunc?SearchText='+ SearchText + "&FilterBy=" + FilterBy,
            
            type: 'POST',
            contentType: 'html',
            error: function (xhr) {
                alert('Error: ' + xhr.statusText);
            },
            success: function (result) {
                if (result.length == 0) {
                    $.notify("Data not exists!");
                } else {
                    $.notify("Data Found!", "success");
                    $.each(result, function (index, value) {
                        var tableData = "<tr>" +
                            "<td>" + value.EmployeeId + "</td>" +
                            "<td>" + value.Name + "</td>" +
                            "<td>" + value.Age + "</td>" +
                            "<td>" + value.Office + "</td>" +
                            "<td>" + value.Position + "</td>" +
                            "<td>" + value.Salary + "</td>" +
                            "<td>" + value.IsCurrentEmployee + "</td>" +
                            "</tr>";
                        Data.append(tableData);
                    });
                }

            },
            async: true,
            processData: false
        });
    }



</script>
<style>
    * {
        margin: 0;
        padding: 0;
        list-style: none;
        text-decoration: none;
    }

    .btnButton1 {
        position: fixed;
        float: right;
        top: 13%;
        right: 1%;
    }

    #employeeData.employeeData {
        position: absolute;
        
        height: 310px;
        width: 97%;
        
    }

    #Search.form-control {
        position: absolute;
        width: 50%;
    }
</style>
<meta name="viewport" content="width=device-width" />

<title>Employee</title>

<h2>Employees Information</h2>
<div id="button2" class="btnButton1">
    <button type="submit" class="btn btn-success"><i class="material-icons">person_add</i>Add Employee</button>
</div>

<b>Filter By : </b>
<select id="FilterBy">
    <option value="">Select</option>
    <option value="True">True</option>
    <option value="False">False</option>
</select><br /><br />

@*@Html.TextBox("Search")<i class="material-icons" id="tableSearch" type="submit" value="Search">search</i><br /><br />*@
@*<form class="form-inline ">
        <input class="form-control form-control-sm mr-3 w-75" type="text" placeholder="Search" aria-label="Search" id="Search">
        <i class="fas fa-search" aria-hidden="true" id="tableSearch" type="submit" value="Search"></i>
    </form>*@
@*<input id="tableSearch" type="submit" value="Search"><br /><br />*@
<input class="form-control" type="text" placeholder="Search" aria-label="Search" id="Search"><br /><br />
<div id="employeeData" class="employeeData">


    @*<button type="submit" class="btn btn-success" onclick="Search('@Url.Action("Search", "Employee", new {id = #tableSearch})')"><i class="material-icons">search</i>Search</button>*@



    @*<div class="col-md-6 select-outline">
            <select class="mdb-select md-form md-outline colorful-select dropdown-primary">
                <option value="" selected>Choose your option</option>
                <option value="1">True</option>
                <option value="2">False</option>
            </select>
            <label><i class="material-icons">search</i></label>

        </div>*@

    <table class="table table-bordered" id="employeeTable">
        <thead class="thead-dark">
            <tr>
                <th>Employee Id</th>
                <th>Name</th>
                <th>Age</th>
                <th>Office</th>
                <th>Position</th>
                <th>Salary</th>
                <th>Is Current Employee</th>
            </tr>
        </thead>
        <tbody id="tableSrch">
            @foreach (var item in Model)
            {
                <tr>
                    <td>
                        @Html.DisplayFor(modelItem => item.EmployeeId)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Name)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Age)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Office)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Position)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Salary)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.IsCurrentEmployee)
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>




